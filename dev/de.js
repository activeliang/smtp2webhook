var simpleParser = require('mailparser').simpleParser;
const base64 = require('js-base64');

const content = "UmVjZWl2ZWQ6IGZyb20gbGVsdnN0b3JlLXByb2QtYWRtaW4tbm9kZTEuZXh0LnRpLmNvbSAobGVsdnN0b3JlLXByb2QtYWRtaW4tbm9kZTEuZXh0LnRpLmNvbSBbMTM5LjE4Ny4zMi4yMDRdKQ0KCWJ5IGxlbHYwMTQzLmV4dC50aS5jb20gKDguMTUuMi84LjE1LjIpIHdpdGggRVNNVFAgaWQgMTk2RTlRZ3ExMjQzMjYNCglmb3IgPFJFUC5ERUFOK0dFTE9DT05OQFZPTlJVRURFTi5YWVo+OyBXZWQsIDYgT2N0IDIwMjEgMDk6MDk6MjYgLTA1MDANCkRLSU0tU2lnbmF0dXJlOiB2PTE7IGE9cnNhLXNoYTI1NjsgYz1yZWxheGVkL3JlbGF4ZWQ7IGQ9dGkuY29tOw0KCXM9dGktY29tLTE3UTE7IHQ9MTYzMzUyOTM2NjsNCgliaD1udDE3dkFCdVhadUFpalNZMUhuNWprQjRKb3R6azllaWcyRkZRV2hIVGpvPTsNCgloPURhdGU6RnJvbTpSZXBseS1UbzpUbzpTdWJqZWN0Ow0KCWI9Si9kT0F5L2hwaWdtS1FKdXZkbUxCN1Irb0xHbEpubC8zbG52bjFONnJ6b2srWFFsQWIvRkJhc1V2MU5JMytia2MNCgkgQXVGYThLSGoxK202ajB6NEQwT1c1bU94bDBvSjVJbnp2Y0lTSlU5TlFhV044OU1zY2NPMENpVldtdzMyd2dXeVFkDQoJIFpUNUFPbnhEN29lZ21hbFZqNWc0MEtwczgzdzNJbkJ2ejh2bUFEZ1U9DQpSZWNlaXZlZDogZnJvbSBsZWx2c3RvcmUtcHJvZC1hZG1pbi1ub2RlMS5leHQudGkuY29tIChsb2NhbGhvc3QgWzEyNy4wLjAuMV0pDQoJYnkgbGVsdnN0b3JlLXByb2QtYWRtaW4tbm9kZTEuZXh0LnRpLmNvbSAoUG9zdGZpeCkgd2l0aCBFU01UUCBpZCA3QTg3QkMwOTQ1DQoJZm9yIDxSRVAuREVBTitHRUxPQ09OTkBWT05SVUVERU4uWFlaPjsgV2VkLCAgNiBPY3QgMjAyMSAwOTowODo1NiAtMDUwMCAoQ0RUKQ0KRGF0ZTogV2VkLCA2IE9jdCAyMDIxIDA5OjA4OjU2IC0wNTAwIChDRFQpDQpGcm9tOiBUSSBzdG9yZSA8ZG9ub3RyZXBseUB0aS5jb20+DQpSZXBseS1UbzogImRvLW5vdC1yZXBseUB0aS5jb20iIDxkby1ub3QtcmVwbHlAdGkuY29tPg0KVG86ICJSRVAuREVBTitHRUxPQ09OTkBWT05SVUVERU4uWFlaIiA8UkVQLkRFQU4rR0VMT0NPTk5AVk9OUlVFREVOLlhZWj4NCk1lc3NhZ2UtSUQ6IDw1OTgyNzMzLjE1NzMzLjE2MzM1MjkzMzY1MDEuSmF2YU1haWwuaGJhZG1pbkBsZWx2c3RvcmUtcHJvZC1hZG1pbi1ub2RlMS5leHQudGkuY29tPg0KU3ViamVjdDogPT9VVEYtOD9CP1ZFa2djM1J2Y21YbHVwUGxyWmpudEtmbWdLVWc1bytRNllhU0lPS0FreURvcjdmbGk3L2xtNTdscEkwPT89DQpNSU1FLVZlcnNpb246IDEuMA0KQ29udGVudC1UeXBlOiBtdWx0aXBhcnQvbWl4ZWQ7IA0KCWJvdW5kYXJ5PSItLS0tPV9QYXJ0XzE1NzMyXzIyNzkyNzc3My4xNjMzNTI5MzM2NDk2Ig0KDQotLS0tLS09X1BhcnRfMTU3MzJfMjI3OTI3NzczLjE2MzM1MjkzMzY0OTYNCkNvbnRlbnQtVHlwZTogdGV4dC9odG1sOyBjaGFyc2V0PVVURi04DQpDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiBxdW90ZWQtcHJpbnRhYmxlDQoNCjxodG1sPjxoZWFkPjxtZXRhIGNoYXJzZXQ9M0QidXRmLTgiPjwvaGVhZD48Ym9keSBiZ2NvbG9yPTNEIiNmZmZmZmYiPjx0YWJsZT0NCiB3aWR0aD0zRCIxMDAlIiBib3JkZXI9M0QiMCIgYWxpZ249M0QiY2VudGVyIiBjZWxscGFkZGluZz0zRCIwIiBjZWxsc3BhY2luZz0NCj0zRCIwIiBiZ2NvbG9yPTNEIiNmZmZmZmYiPjx0cj49MDk8dGQ+Jm5ic3A7PC90ZD48L3RyPjx0cj49MDk8dGQgYWxpZ249M0QiYz0NCmVudGVyIiB2YWxpZ249M0QidG9wIj49MDk8dGFibGUgd2lkdGg9M0QiNjEwIiBib3JkZXI9M0QiMCIgYWxpZ249M0QiY2VudGVyIj0NCiBjZWxscGFkZGluZz0zRCIwIiBjZWxsc3BhY2luZz0zRCIwIiBib3JkZXJjb2xvcj0zRCIjZmZmIj49MDk8dHI+PTA5PHRkIGFsaT0NCmduPTNEImNlbnRlciIgdmFsaWduPTNEInRvcCIgYmdjb2xvcj0zRCIjRkZGRkZGIj49MDk9MDk8IS0tIEJFR0lOIElubmVyIHRhYj0NCmxlIC0tPj0wOT0wOTx0YWJsZSB3aWR0aD0zRCI1NzAiIGNlbGxwYWRkaW5nPTNEIjAiIGNlbGxzcGFjaW5nPTNEIjAiIGJvcmRlcj0NCj0zRCIwIiBhbGlnbj0zRCJjZW50ZXIiPj0wOT0wOTx0cj49MDk9MDk9MDk8dGQgdmFsaWduPTNEIm1pZGRsZSI+Jm5ic3A7PC90ZD0NCj49MDk9MDk8L3RyPj0wOT0wOTx0cj49MDk9MDk9MDk8dGQgaGVpZ2h0PTNEIjMwIiBhbGlnbj0zRCJyaWdodCIgdmFsaWduPTNEIj0NCm1pZGRsZSIgYmdjb2xvcj0zRCIjY2MwMDAwIiBzdHlsZT0zRCJwYWRkaW5nOiAxMHB4OyI+PTA5PTA5PTA5ICAgPGltZyBzcmM9DQo9M0QiaHR0cHM6Ly93d3cudGkuY29tL3N0b3JlL191aS9yZXNwb25zaXZlL2NvbW1vbi9pbWFnZXMvdGlfaHpfMWNfcmV2X3JnYl89DQpwbmcucG5nIiBhbHQ9M0QiIiB3aWR0aD0zRCJhdXRvIiBoZWlnaHQ9M0QiMzAiIGJvcmRlcj0zRCIwIiBhbGlnbj0zRCJyaWdodCI9DQogdGl0bGU9M0QiIiAvPj0wOT0wOT0wOTwvdGQ+PTA5PTA5PC90cj49MDk9MDk8dHI+PTA5PTA5PTA5PHRkPiZuYnNwOzwvdGQ+PQ0KPTA5PTA5PC90cj49MDk9MDk8dHI+PTA5PTA5PHRkIGFsaWduPTNEImxlZnQiIHZhbGlnbj0zRCJ0b3AiPj0wOT0wOTxwIHN0eWxlPQ0KPTNEIm1hcmdpbjoycHggMCI+PGZvbnQgY29sb3I9M0QiIzAwMDAwMCIgc2l6ZT0zRCIyIiBmYWNlPTNEIkFyaWFsLCBIZWx2ZXRpPQ0KY2EsIHNhbnMtc2VyaWYiPjxiPj1FNj04Mj1BOD1FNT1BNT1CRCAgUkVQLkRFQU4rR0VMT0NPTk5AVk9OUlVFREVOLlhZWjwvYj4sPQ0KPC9mb250PjwvcD49MDk9MDk8cCBzdHlsZT0zRCJtYXJnaW46MnB4IDAiPjxmb250IGNvbG9yPTNEIiMwMDAwMDAiIHNpemU9M0QiPQ0KMiIgZmFjZT0zRCJBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmIj49MDk9MDk9MDk8cD49MDk9MDk9MDk9MDk9RTY9ODI9QTg9DQo9RTY9OUI9QkU9RTU9OUM9QThUSSBzdG9yZT1FNT1CQz04MD1FNT05MD1BRiA8YSBocmVmPTNEImh0dHBzOi8vd3d3LnRpLmNvbS89DQpzdG9yZS90aS96aC9wL3Byb2R1Y3QvP3A9M0RUUFM1NjUyMDhERENUIiBzdHlsZT0zRCJjb2xvcjojMTE4ODk5O3RleHQtZGVjb3I9DQphdGlvbjpub25lOyI+VFBTNTY1MjA4RERDVDwvYT49RTc9OUE9ODQ9RTU9ODg9QjA9RTg9QjQ9QTc9RTk9ODA9OUE9RTc9OUY9QTU9DQo9RUY9QkM9OEM9RTg9QUY9QTU9RTQ9QkE9QTc9RTU9OTM9ODE9RTc9OEU9QjA9RTU9Qjc9QjI9RTU9ODg9QjA9RTg9QjQ9QTc9RUY9DQo9QkM9OEM9RTY9QUM9QTI9RTg9QkY9OEU9RTg9QUU9QTI9RTg9QjQ9QUQ9RTM9ODA9ODI9MDk9MDk9MDk8L3A+PTA5PTA5PC9mb249DQp0PjwvcD49MDk9MDk8cD48Zm9udCBjb2xvcj0zRCIjMDAwMDAwIiBzaXplPTNEIjIiIGZhY2U9M0QiQXJpYWwsIEhlbHZldGljYSw9DQogc2Fucy1zZXJpZiI+PTA5PTA5PTA5PUU1PUE2PTgyPUU5PTlDPTgwPUU2PTlCPUI0PUU1PUE0PTlBPUU0PUJGPUExPUU2PTgxPQ0KPUFGPUVGPUJDPThDPUU4PUFGPUI3PUU2PTlGPUE1PUU3PTlDPThCIDxhIGhyZWY9M0QiIGh0dHA6Ly93d3cudGkuY29tLmNuL3poPQ0KLWNuL2luZm8tc3RvcmUvdGktc3RvcmUtb3JkZXIuaHRtbCIgc3R5bGU9M0QiY29sb3I6IzExODg5OTt0ZXh0LWRlY29yYXRpb246PQ0Kbm9uZTsiPj1FNT1COD1COD1FOD1BNz04MT1FOT05Nz1BRT1FOT1BMj05OD1FOD1BNz1BMz1FNz1BRD05NDwvYT4gPUU2PTg4PTk2PQ0KPUU4PTgxPTk0PUU3PUIzPUJCVEk9RTc9OUE9ODQgIDxhIGhyZWY9M0QiIGh0dHA6Ly93d3cudGkuY29tLmNuL2d1aWRlZHN1cHBvPQ0KcnQvY24vY2FsbC10aS1zdXBwb3J0IiBzdHlsZT0zRCJjb2xvcjojMDA4MDgwO3RleHQtZGVjb3JhdGlvbjpub25lOyI+PUU1PUFFPQ0KPUEyPUU2PTg4PUI3PUU2PTk0PUFGPUU2PThDPTgxPUU1PTlCPUEyPUU5PTk4PTlGPC9hPj1FMz04MD04Mj0wOT0wOTwvZm9udD48PQ0KL3A+PTA5PTA5PHA+PGZvbnQgY29sb3I9M0QiIzAwMDAwMCIgc2l6ZT0zRCIyIiBmYWNlPTNEIkFyaWFsLCBIZWx2ZXRpY2EsIHNhPQ0KbnMtc2VyaWYiPj1FOD1CMD1BMj1FOD1CMD1BMj1FRj1CQz04QzwvZm9udD48L3A+PTA5PTA5PHA+PGZvbnQgY29sb3I9M0QiIzAwPQ0KMDAwMCIgc2l6ZT0zRCIyIiBmYWNlPTNEIkFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiPlRJIHN0b3JlPC9mb250PjwvcD49DQo9MDk9MDk8L3RkPj0wOT0wOTwvdHI+PTA5PTA5PHRyPj0wOT0wOT0wOTx0ZD4mbmJzcDs8L3RkPj0wOT0wOTwvdHI+PTA5PTA5PHQ9DQpyPj0wOT0wOT0wOTx0ZCBoZWlnaHQ9M0QiMSIgYWxpZ249M0QicmlnaHQiIHZhbGlnbj0zRCJtaWRkbGUiIGJnY29sb3I9M0QiI2M9DQowYzBjMCI+PC90ZD49MDk9MDk8L3RyPj0wOT0wOTx0cj49MDk9MDk9MDk8dGQ+Jm5ic3A7PC90ZD49MDk9MDk8L3RyPj0wOT0wOTw9DQp0cj49MDk9MDk9MDk8dGQ+PTA5PTA5PTA5PTA5PHA+PGZvbnQgY29sb3I9M0QiIzAwMDAwMCIgc3R5bGU9M0QiZm9udC1zaXplOjE9DQoxcHgiIGZhY2U9M0QiQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZiI+PTA5PTA5PTA5PTA5PTA5PHA+VG8gZW5zdXJlIGRlbGk9DQp2ZXJ5IHRvIHlvdXIgaW5ib3gsIHBsZWFzZSBhZGQgPGEgaHJlZj0zRCJkb25vdHJlcGx5QHRpLmNvbSIgc3R5bGU9M0QiY29sb3I9DQo6IzExODg5OTt0ZXh0LWRlY29yYXRpb246bm9uZTsiPmRvbm90cmVwbHlAdGkuY29tPC9hPiB0byB5b3VyIGFkZHJlc3MgYm9vayA9DQpvciBzYWZlIHNlbmRlciBsaXN0LjwvcD49MDk9MDk9MDk9MDk9MDk8cD5UaGUgcGxhdGZvcm0gYmFyIGlzIGEgdHJhZGVtYXJrIG89DQpmIFRleGFzIEluc3RydW1lbnRzLiAgQWxsIG90aGVyIHRyYWRlbWFya3MgYXJlIHRoZSBwcm9wZXJ0eSBvZiB0aGVpciByZXNwZWM9DQp0aXZlIG93bmVycy48L3A+ID0wOT0wOT0wOT0wOT0wOTxwPiZjb3B5OyAyMDIwIFRleGFzIEluc3RydW1lbnRzIEluY29ycG9yYXQ9DQplZCwgMTI1MDAgVEkgQmx2ZCwgRGFsbGFzLCBUWCA3NTI0My4gUmVhZCBUSSdzICA8YSBocmVmPTNEImh0dHBzOi8vd3d3LnRpLmM9DQpvbS8vY29ycC9kb2NzL2xlZ2FsL3ByaXZhY3kuc2h0bWwiIHN0eWxlPTNEImNvbG9yOiMxMTg4OTk7dGV4dC1kZWNvcmF0aW9uOm49DQpvbmU7Ij5Qcml2YWN5IHBvbGljeTwvYT4uPC9wPj0wOT0wOT0wOT0wOT0wOTxwPjxhIGhyZWY9M0QiaHR0cHM6Ly93d3cudGkuY289DQptL3N0b3JlL3RpL3poL215YWNjb3VudCIgc3R5bGU9M0QiY29sb3I6IzExODg5OTsiPj1FNz05OT1CQj1FOT05OT04Nj1FNj04OD0NCj05MT1FNz05QT04NFRJIHN0b3JlID1FOD1CND1BNj1FNT04Rj1CNzwvYT48L3A+PTA5PTA5PTA5PTA5PC9mb250PjwvcD49MDk9DQo9MDk9MDk8L3RkPj0wOT0wOTwvdHI+PTA5PTA5PC90YWJsZT4gPCEtLSBFTkQgaW5uZXIgdGFibGUgLS0+PTA5PC90ZD49MDk8L3Q9DQpyPj0wOTwvdGFibGU+PTA5PC90ZD48L3RyPjx0cj49MDk8dGQ+Jm5ic3A7PC90ZD48L3RyPjwvdGFibGU+PC9ib2R5PjwvaHRtbD4NCi0tLS0tLT1fUGFydF8xNTczMl8yMjc5Mjc3NzMuMTYzMzUyOTMzNjQ5Ni0tDQo="

const str = base64.decode(content)

console.log(`--> start....`);
(async _ => {
  let parsed = await simpleParser(str);
  console.log(parsed.html)
  console.log(parsed.text)

  console.log(`----> test `)

  console.log(Buffer.from(str, 'base64').toString('base64'))
})();